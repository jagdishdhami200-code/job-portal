<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobLink Nepal - Professional Network</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animations */
        @keyframes like-bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .animate-like { animation: like-bounce 0.3s ease-in-out; }
        
        .verified-badge { color: #3b82f6; margin-left: 4px; }
        
        /* Poll Bar Animation */
        .poll-bar { transition: width 0.5s ease-in-out; }

        /* Glass Effect */
        .glass-header {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        /* Modal Transitions */
        .modal {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            pointer-events: none;
        }
        .modal.active {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        .modal.active .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body class="text-slate-800 relative">

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
            
            <!-- LEFT SIDEBAR (Navigation & Profile) -->
            <div class="hidden md:block md:col-span-3 space-y-6">
                
                <!-- Brand / Logo Removed as requested -->

                <!-- Profile Card -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden relative group cursor-pointer" onclick="navigateTo('Profile')">
                    <div class="h-20 bg-gradient-to-r from-blue-600 to-indigo-600"></div>
                    <div class="px-5 pb-5">
                        <div class="relative -mt-10 mb-3 flex justify-between items-end">
                            <img class="h-20 w-20 rounded-2xl border-4 border-white shadow-md bg-white object-cover" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Aarav" alt="User">
                             <span class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded-full border border-green-200 uppercase tracking-wide">Open to Work</span>
                        </div>
                        <h2 class="text-lg font-bold text-slate-900 leading-tight">Aarav Shrestha</h2>
                        <p class="text-sm text-slate-500 mb-3">Senior Frontend Developer</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="px-2 py-1 bg-purple-50 text-purple-600 text-xs font-medium rounded-md border border-purple-100">Freelancing</span>
                            <span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs font-medium rounded-md border border-blue-100">Remote</span>
                        </div>
                        <div class="flex justify-between items-center pt-3 border-t border-slate-100 text-sm">
                             <span class="text-slate-500">Profile Views</span>
                             <span class="font-bold text-slate-800">1,240</span>
                        </div>
                    </div>
                </div>

                <!-- Navigation & Categories -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-4 sticky top-6">
                    
                    <!-- Main Nav -->
                    <nav class="space-y-1 mb-6">
                        <a href="#" onclick="navigateTo('Feed')" class="flex items-center gap-3 text-slate-800 font-semibold p-2.5 rounded-xl bg-slate-50 border border-slate-100 transition hover:bg-blue-50 hover:text-blue-600 hover:border-blue-100">
                            <div class="w-8 h-8 rounded-lg bg-white flex items-center justify-center text-blue-600 shadow-sm"><i class="fas fa-home"></i></div>
                            <span>Feed</span>
                        </a>
                        <a href="#" onclick="navigateTo('Find Jobs')" class="flex items-center gap-3 text-slate-600 font-medium p-2.5 rounded-xl transition hover:bg-slate-50 hover:text-slate-900">
                            <div class="w-8 h-8 rounded-lg bg-slate-50 flex items-center justify-center text-slate-500 shadow-sm"><i class="fas fa-briefcase"></i></div>
                            <span>Find Jobs</span>
                        </a>
                         <a href="#" onclick="navigateTo('Companies')" class="flex items-center gap-3 text-slate-600 font-medium p-2.5 rounded-xl transition hover:bg-slate-50 hover:text-slate-900">
                            <div class="w-8 h-8 rounded-lg bg-slate-50 flex items-center justify-center text-slate-500 shadow-sm"><i class="fas fa-building"></i></div>
                            <span>Companies</span>
                        </a>
                    </nav>

                    <!-- Categories -->
                    <div class="mb-6">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-2">Job Categories</h3>
                        <div class="space-y-1">
                            <a href="#" onclick="filterCategory('Development')" class="flex items-center justify-between group p-2 rounded-lg hover:bg-slate-50 transition">
                                <div class="flex items-center gap-3 text-sm text-slate-600 font-medium group-hover:text-blue-600">
                                    <i class="fas fa-code w-4 text-center text-slate-400 group-hover:text-blue-500"></i> Development
                                </div>
                                <span class="text-[10px] bg-slate-100 text-slate-500 py-0.5 px-2 rounded-full group-hover:bg-blue-100 group-hover:text-blue-600">120</span>
                            </a>
                            <a href="#" onclick="filterCategory('Design')" class="flex items-center justify-between group p-2 rounded-lg hover:bg-slate-50 transition">
                                <div class="flex items-center gap-3 text-sm text-slate-600 font-medium group-hover:text-blue-600">
                                    <i class="fas fa-pen-nib w-4 text-center text-slate-400 group-hover:text-blue-500"></i> Design
                                </div>
                                <span class="text-[10px] bg-slate-100 text-slate-500 py-0.5 px-2 rounded-full group-hover:bg-blue-100 group-hover:text-blue-600">45</span>
                            </a>
                             <a href="#" onclick="filterCategory('Marketing')" class="flex items-center justify-between group p-2 rounded-lg hover:bg-slate-50 transition">
                                <div class="flex items-center gap-3 text-sm text-slate-600 font-medium group-hover:text-blue-600">
                                    <i class="fas fa-bullhorn w-4 text-center text-slate-400 group-hover:text-blue-500"></i> Marketing
                                </div>
                                <span class="text-[10px] bg-slate-100 text-slate-500 py-0.5 px-2 rounded-full group-hover:bg-blue-100 group-hover:text-blue-600">32</span>
                            </a>
                        </div>
                    </div>

                    <!-- Availability / Tags -->
                    <div>
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-2">Work Status</h3>
                        <div class="space-y-2">
                            <label class="flex items-center justify-between p-2.5 border border-slate-100 rounded-xl cursor-pointer hover:border-green-200 hover:bg-green-50/50 transition group" onclick="toggleStatus('Open to Work')">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600"><i class="fas fa-check"></i></div>
                                    <div>
                                        <p class="text-sm font-semibold text-slate-800">Open to Work</p>
                                        <p class="text-[10px] text-slate-500">Actively looking</p>
                                    </div>
                                </div>
                                <div class="w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]"></div>
                            </label>

                             <label class="flex items-center justify-between p-2.5 border border-slate-100 rounded-xl cursor-pointer hover:border-purple-200 hover:bg-purple-50/50 transition group" onclick="toggleStatus('Freelancing')">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600"><i class="fas fa-laptop-code"></i></div>
                                    <div>
                                        <p class="text-sm font-semibold text-slate-800">Freelancing</p>
                                        <p class="text-[10px] text-slate-500">Available for gigs</p>
                                    </div>
                                </div>
                                 <div class="w-8 h-4 bg-purple-200 rounded-full relative"><div class="absolute right-0.5 top-0.5 w-3 h-3 bg-white rounded-full shadow-sm"></div></div>
                            </label>
                        </div>
                    </div>

                </div>
            </div>

            <!-- CENTER FEED -->
            <div class="col-span-1 md:col-span-6 space-y-6">
                
                <!-- Search Bar Removed as requested -->

                <!-- Create Post Widget -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-5 mt-6 md:mt-0">
                    <div class="flex gap-4 mb-4">
                        <img class="h-12 w-12 rounded-full object-cover border border-slate-200" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Aarav" alt="User">
                        <div class="flex-grow">
                            <input id="postInput" type="text" placeholder="What's on your mind, Aarav?" class="w-full bg-slate-50 hover:bg-slate-100 border-none rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:bg-white transition text-slate-700">
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="flex gap-1">
                            <button onclick="document.getElementById('fileInput').click()" class="flex items-center gap-2 text-slate-500 hover:text-slate-700 hover:bg-slate-50 px-3 py-2 rounded-lg transition text-sm font-medium">
                                <i class="fas fa-image text-green-500 text-lg"></i> Photo
                            </button>
                            <input type="file" id="fileInput" class="hidden" onchange="alert('Image selected (simulated)')">
                            
                            <button onclick="openModal('jobModal')" class="flex items-center gap-2 text-slate-500 hover:text-slate-700 hover:bg-slate-50 px-3 py-2 rounded-lg transition text-sm font-medium">
                                <i class="fas fa-briefcase text-blue-500 text-lg"></i> Job
                            </button>
                            <button onclick="openModal('pollModal')" class="flex items-center gap-2 text-slate-500 hover:text-slate-700 hover:bg-slate-50 px-3 py-2 rounded-lg transition text-sm font-medium">
                                <i class="fas fa-poll text-orange-500 text-lg"></i> Poll
                            </button>
                        </div>
                        <button onclick="submitTextPost()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-semibold text-sm transition shadow-md shadow-blue-200 active:scale-95 transform">Post</button>
                    </div>
                </div>

                <!-- Feed Container -->
                <div id="feed-container" class="space-y-6">
                    <!-- Posts injected here -->
                    <div class="text-center py-12 bg-white rounded-2xl shadow-sm border border-slate-100">
                        <i class="fas fa-circle-notch fa-spin text-blue-600 text-3xl mb-3"></i>
                        <p class="text-slate-500 font-medium">Curating your feed...</p>
                    </div>
                </div>
            </div>

            <!-- RIGHT SIDEBAR (Widgets) -->
            <div class="hidden md:block md:col-span-3 space-y-6">
                
                <!-- Trending Jobs -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <h3 class="font-bold text-slate-800 mb-5 flex items-center gap-2">
                        <i class="fas fa-fire text-orange-500"></i> Trending Jobs
                    </h3>
                    <div id="trending-jobs-list" class="space-y-5">
                        <!-- Injected via JS -->
                    </div>
                    <button onclick="alert('Navigating to Trending Jobs...')" class="w-full mt-4 text-sm text-blue-600 font-medium hover:underline text-left">View all trends</button>
                </div>

                <!-- Top Hiring Companies -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <h3 class="font-bold text-slate-800 mb-5 flex items-center gap-2">
                        <i class="fas fa-building text-blue-500"></i> Top Hiring
                    </h3>
                    <div id="top-companies-list" class="space-y-4">
                        <!-- Injected via JS -->
                    </div>
                    <button onclick="alert('Viewing all companies...')" class="w-full mt-4 text-sm text-blue-600 font-medium hover:underline text-left">View all companies</button>
                </div>

            </div>
        </div>
    </div>

    <!-- Job Modal -->
    <div id="jobModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm">
        <div class="modal-content bg-white w-full max-w-lg rounded-2xl shadow-2xl p-6 m-4 relative">
            <button onclick="closeModal('jobModal')" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition"><i class="fas fa-times text-xl"></i></button>
            <h2 class="text-xl font-bold text-slate-900 mb-1">Create Job Posting</h2>
            <p class="text-sm text-slate-500 mb-6">Share a new opportunity with the network.</p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-semibold text-slate-700 mb-1">Job Title</label>
                    <input type="text" id="jobTitle" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none transition" placeholder="e.g. Senior Product Designer">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-semibold text-slate-700 mb-1">Location</label>
                        <input type="text" id="jobLocation" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none transition" placeholder="e.g. Kathmandu">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-700 mb-1">Job Type</label>
                        <select id="jobType" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none transition">
                            <option>Full-time</option>
                            <option>Part-time</option>
                            <option>Contract</option>
                            <option>Internship</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-xs font-semibold text-slate-700 mb-1">Salary Range</label>
                    <input type="text" id="jobSalary" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none transition" placeholder="e.g. NPR 50k - 80k">
                </div>
                <button onclick="submitJob()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg shadow-blue-200 transition mt-2 active:scale-95 transform">Post Job Opportunity</button>
            </div>
        </div>
    </div>

    <!-- Poll Modal -->
    <div id="pollModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm">
        <div class="modal-content bg-white w-full max-w-lg rounded-2xl shadow-2xl p-6 m-4 relative">
            <button onclick="closeModal('pollModal')" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition"><i class="fas fa-times text-xl"></i></button>
            <h2 class="text-xl font-bold text-slate-900 mb-1">Create Poll</h2>
            <p class="text-sm text-slate-500 mb-6">Ask the community for their opinion.</p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-semibold text-slate-700 mb-1">Your Question</label>
                    <input type="text" id="pollQuestion" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none transition" placeholder="What topic should we discuss next?">
                </div>
                
                <div class="space-y-3">
                    <label class="block text-xs font-semibold text-slate-700">Options</label>
                    <input type="text" id="pollOpt1" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm outline-none transition focus:border-blue-300" placeholder="Option 1">
                    <input type="text" id="pollOpt2" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm outline-none transition focus:border-blue-300" placeholder="Option 2">
                    <input type="text" id="pollOpt3" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2.5 text-sm outline-none transition focus:border-blue-300" placeholder="Option 3 (Optional)">
                </div>

                <button onclick="submitPoll()" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-xl shadow-lg shadow-orange-200 transition mt-2 active:scale-95 transform">Create Poll</button>
            </div>
        </div>
    </div>

    <script>
        // --- DATA SIMULATION ---

        const currentUser = {
            name: "Aarav Shrestha",
            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Aarav",
            title: "Senior Frontend Developer",
            workStatus: "Open to Work"
        };

        let posts = [
            {
                id: 1,
                author: "CloudTech Nepal",
                authorAvatar: "https://api.dicebear.com/7.x/identicon/svg?seed=CloudTech",
                authorTitle: "Leading IT Solutions in Lalitpur",
                authorStatus: "Hiring",
                isVerified: true,
                time: "2h ago",
                type: "job",
                content: "We are expanding our team! Looking for a passionate React Developer to join our office in Jhamsikhel. Great culture and benefits.",
                jobDetails: {
                    title: "Senior React Developer",
                    location: "Jhamsikhel, Lalitpur",
                    type: "Full-time",
                    salary: "NPR 80k - 120k",
                    tags: ["Remote Friendly", "Urgent"]
                },
                likes: 145,
                comments: 32,
                shares: 12,
                likedByMe: false
            },
            {
                id: 2,
                author: "Sita Sharma",
                authorAvatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Sita",
                authorTitle: "HR Manager at Himalayan Bank",
                authorStatus: null, 
                isVerified: false,
                time: "45m ago",
                type: "poll",
                content: "What is the most important factor for you when choosing a new job in Nepal right now?",
                pollData: {
                    totalVotes: 1240,
                    options: [
                        { text: "High Salary ðŸ’°", votes: 600 },
                        { text: "Work Life Balance âš–ï¸", votes: 400 },
                        { text: "Remote Work Options ðŸ ", votes: 140 },
                        { text: "Brand Reputation ðŸ¢", votes: 100 }
                    ],
                    votedOption: null
                },
                likes: 89,
                comments: 104,
                shares: 5,
                likedByMe: false
            },
            {
                id: 3,
                author: "WorldLink Communications",
                authorAvatar: "https://api.dicebear.com/7.x/identicon/svg?seed=WorldLink",
                authorTitle: "Internet Service Provider",
                authorStatus: "Active",
                isVerified: true,
                time: "3h ago",
                type: "update",
                content: "We are proud to announce that we've connected 50 new remote villages in Karnali Province this month! Internet for all. ðŸŒðŸ‡³ðŸ‡µ #DigitalNepal #Connectivity",
                image: "https://images.unsplash.com/photo-1544654032-901d89851722?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                likes: 892,
                comments: 120,
                shares: 230,
                likedByMe: false
            },
            {
                id: 4,
                author: "Pathao Nepal",
                authorAvatar: "https://api.dicebear.com/7.x/identicon/svg?seed=Pathao",
                authorTitle: "Moving Nepal",
                authorStatus: "Hiring",
                isVerified: true,
                time: "6h ago",
                type: "job",
                content: "Join our operations team! We are looking for dynamic City Launchers for Biratnagar and Chitwan.",
                jobDetails: {
                    title: "City Launcher (Operations)",
                    location: "Biratnagar / Chitwan",
                    type: "Full-time",
                    salary: "NPR 40k - 60k",
                    tags: ["Field Work"]
                },
                likes: 210,
                comments: 55,
                shares: 40,
                likedByMe: false
            },
            {
                id: 5,
                author: "CodeHimalaya",
                authorAvatar: "https://api.dicebear.com/7.x/identicon/svg?seed=CodeHimalaya",
                authorTitle: "Software Development Company",
                authorStatus: null,
                isVerified: true,
                time: "8h ago",
                type: "update",
                content: "Our team just returned from a retreat in Nagarkot! Recharged and ready to build amazing software. ðŸ”ï¸ðŸ’»",
                likes: 340,
                comments: 22,
                shares: 5,
                likedByMe: true
            },
            {
                id: 6,
                author: "Foodmandu",
                authorAvatar: "https://api.dicebear.com/7.x/identicon/svg?seed=Foodmandu",
                authorTitle: "Food Delivery Service",
                authorStatus: "Growing Fast",
                isVerified: true,
                time: "1d ago",
                type: "update",
                content: "Excited to announce that we have reached 500+ partner restaurants across Pokhara! ðŸš€ Thank you to our amazing delivery riders and customers.",
                image: "https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                likes: 542,
                comments: 45,
                shares: 88,
                likedByMe: true
            }
        ];

        const trendingJobs = [
            { title: "UI/UX Designer", company: "eSewa", location: "Kathmandu", applicants: "140+", icon: "fa-pen-nib" },
            { title: "Python Developer", company: "Fusemachines", location: "Kamaladi", applicants: "85", icon: "fa-code" },
            { title: "Digital Marketing", company: "Daraz Nepal", location: "Thapathali", applicants: "200+", icon: "fa-bullhorn" },
            { title: "Project Manager", company: "Deerwalk", location: "Sifal", applicants: "50+", icon: "fa-tasks" }
        ];

        const topCompanies = [
            { name: "Verisk Nepal", type: "IT Services", activeJobs: 12, logo: "https://api.dicebear.com/7.x/identicon/svg?seed=Verisk" },
            { name: "Leapfrog", type: "Software", activeJobs: 8, logo: "https://api.dicebear.com/7.x/identicon/svg?seed=Leapfrog" },
            { name: "Ncell Axiata", type: "Telecom", activeJobs: 5, logo: "https://api.dicebear.com/7.x/identicon/svg?seed=Ncell" },
            { name: "F1Soft", type: "FinTech", activeJobs: 15, logo: "https://api.dicebear.com/7.x/identicon/svg?seed=F1Soft" },
        ];

        function rankPosts(postsArray) {
            return postsArray.sort((a, b) => {
                const scoreA = (a.likes * 1) + (a.comments * 2) + (a.shares * 3);
                const scoreB = (b.likes * 1) + (b.comments * 2) + (b.shares * 3);
                return scoreB - scoreA;
            });
        }

        function init() {
            renderFeed();
            renderSidebar();
        }

        function renderFeed() {
            const container = document.getElementById('feed-container');
            container.innerHTML = '';
            const sortedPosts = rankPosts(posts);

            sortedPosts.forEach(post => {
                const postHTML = createPostHTML(post);
                container.innerHTML += postHTML;
            });
        }

        function createPostHTML(post) {
            const badge = post.isVerified ? '<i class="fas fa-check-circle verified-badge" title="Verified Company"></i>' : '';
            // Work Status Badge Logic
            const statusBadge = post.authorStatus 
                ? `<span class="ml-2 text-[10px] px-2 py-0.5 rounded-full bg-green-100 text-green-700 border border-green-200 font-bold uppercase tracking-wide inline-block transform translate-y-[-1px]">${post.authorStatus}</span>` 
                : '';

            const likeClass = post.likedByMe ? 'text-blue-600' : 'text-slate-500 hover:text-blue-600';
            const likeIcon = post.likedByMe ? 'fas fa-thumbs-up' : 'far fa-thumbs-up';

            let contentBody = `<p class="text-sm text-slate-800 mb-4 whitespace-pre-line leading-relaxed">${post.content}</p>`;

            if (post.type === 'job') {
                contentBody += `
                    <div class="border border-slate-200 rounded-xl p-5 bg-slate-50 mb-4 group hover:border-blue-300 transition cursor-pointer relative overflow-hidden" onclick="alert('Opening job details for: ${post.jobDetails.title}')">
                        <div class="absolute top-0 right-0 w-24 h-24 bg-blue-100 rounded-full -mr-12 -mt-12 opacity-50 group-hover:scale-150 transition duration-500"></div>
                        <div class="flex items-start gap-4 relative z-10">
                            <div class="w-14 h-14 bg-white rounded-lg border border-slate-200 flex items-center justify-center p-2 shadow-sm">
                                <img src="${post.authorAvatar}" class="w-full h-full object-contain">
                            </div>
                            <div class="flex-grow">
                                <h3 class="font-bold text-slate-900 text-lg group-hover:text-blue-700 transition">${post.jobDetails.title}</h3>
                                <p class="text-sm text-slate-600 mb-2">${post.author}</p>
                                <div class="flex flex-wrap gap-2 text-xs font-medium">
                                    <span class="bg-white border px-2.5 py-1 rounded-md text-slate-600 shadow-sm"><i class="fas fa-map-marker-alt text-red-500 mr-1.5"></i>${post.jobDetails.location}</span>
                                    <span class="bg-white border px-2.5 py-1 rounded-md text-slate-600 shadow-sm"><i class="fas fa-clock text-blue-500 mr-1.5"></i>${post.jobDetails.type}</span>
                                    ${post.jobDetails.salary ? `<span class="bg-green-50 border border-green-100 px-2.5 py-1 rounded-md text-green-700 shadow-sm">${post.jobDetails.salary}</span>` : ''}
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-3 border-t border-slate-200 flex justify-end">
                            <button onclick="event.stopPropagation(); alert('Applied for ${post.jobDetails.title}!')" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg text-sm font-semibold transition shadow-sm shadow-blue-200 active:scale-95 transform">Apply Now</button>
                        </div>
                    </div>
                `;
            } else if (post.type === 'poll') {
                const total = post.pollData.totalVotes;
                let optionsHTML = '<div class="space-y-3 mb-4">';
                
                post.pollData.options.forEach((opt, idx) => {
                    const percent = total > 0 ? Math.round((opt.votes / total) * 100) : 0;
                    optionsHTML += `
                        <div class="relative cursor-pointer group" onclick="votePoll(${post.id}, ${idx})">
                            <div class="flex justify-between text-sm mb-1.5 z-10 relative px-1">
                                <span class="font-medium text-slate-700 group-hover:text-blue-700 transition">${opt.text}</span>
                                <span class="text-slate-500 text-xs font-mono">${percent}%</span>
                            </div>
                            <div class="h-10 w-full bg-slate-100 rounded-lg border border-slate-200 overflow-hidden relative">
                                <div class="h-full bg-blue-100 group-hover:bg-blue-200 transition-all poll-bar border-r border-blue-200" style="width: ${percent}%"></div>
                            </div>
                        </div>
                    `;
                });
                optionsHTML += `<div class="text-xs text-slate-400 mt-3 text-right">${total.toLocaleString()} votes â€¢ ${post.time} left</div></div>`;
                contentBody += optionsHTML;
            } else if (post.type === 'update' && post.image) {
                contentBody += `<div class="rounded-xl overflow-hidden border border-slate-100 mb-4 shadow-sm cursor-pointer" onclick="alert('Opening image view...')"><img src="${post.image}" class="w-full h-auto object-cover max-h-96"></div>`;
            }

            return `
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-5 animate-fade-in hover:shadow-md transition duration-300">
                    <!-- Header -->
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex gap-3">
                            <img src="${post.authorAvatar}" class="w-12 h-12 rounded-full border border-slate-100 cursor-pointer object-cover" onclick="alert('Viewing profile of ${post.author}')">
                            <div>
                                <h3 class="font-bold text-slate-900 text-sm hover:text-blue-600 cursor-pointer flex items-center flex-wrap" onclick="alert('Viewing profile of ${post.author}')">
                                    ${post.author} ${badge} ${statusBadge}
                                </h3>
                                <p class="text-xs text-slate-500 line-clamp-1">${post.authorTitle}</p>
                                <p class="text-xs text-slate-400 flex items-center gap-1 mt-0.5">
                                    ${post.time} â€¢ <i class="fas fa-globe-asia text-[10px]"></i>
                                </p>
                            </div>
                        </div>
                        <button class="text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-100 transition" onclick="alert('Options menu opened')"><i class="fas fa-ellipsis-h"></i></button>
                    </div>
                    
                    <!-- Content -->
                    ${contentBody}
                    
                    <!-- Stats Line -->
                    <div class="flex justify-between items-center text-xs text-slate-500 border-b border-slate-100 pb-3 mb-2">
                        <div class="flex items-center gap-1">
                            <div class="flex -space-x-1">
                                <div class="w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center border-2 border-white"><i class="fas fa-thumbs-up text-white text-[8px]"></i></div>
                                <div class="w-5 h-5 rounded-full bg-red-500 flex items-center justify-center border-2 border-white"><i class="fas fa-heart text-white text-[8px]"></i></div>
                            </div>
                            <span class="hover:text-blue-600 hover:underline cursor-pointer ml-2 font-medium" onclick="alert('Showing likes...')">${post.likes}</span>
                        </div>
                        <div class="space-x-3">
                            <span class="hover:text-blue-600 hover:underline cursor-pointer" onclick="commentOnPost(${post.id})">${post.comments} comments</span>
                            <span class="hover:text-blue-600 hover:underline cursor-pointer" onclick="repost(${post.id})">${post.shares} reposts</span>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="flex justify-between items-center pt-1">
                        <button onclick="toggleLike(${post.id})" class="flex items-center gap-2 px-2 sm:px-6 py-2.5 rounded-lg hover:bg-slate-50 transition ${likeClass} flex-1 justify-center group active:bg-slate-100">
                            <i class="${likeIcon} text-lg group-active:scale-125 transition-transform"></i> <span class="font-semibold text-sm">Like</span>
                        </button>
                        <button onclick="commentOnPost(${post.id})" class="flex items-center gap-2 px-2 sm:px-6 py-2.5 rounded-lg hover:bg-slate-50 transition text-slate-500 hover:text-blue-600 flex-1 justify-center active:bg-slate-100">
                            <i class="far fa-comment-dots text-lg"></i> <span class="font-semibold text-sm">Comment</span>
                        </button>
                        <button onclick="repost(${post.id})" class="flex items-center gap-2 px-2 sm:px-6 py-2.5 rounded-lg hover:bg-slate-50 transition text-slate-500 hover:text-blue-600 flex-1 justify-center active:bg-slate-100">
                            <i class="fas fa-retweet text-lg"></i> <span class="font-semibold text-sm">Repost</span>
                        </button>
                        <button onclick="sendPost(${post.id})" class="flex items-center gap-2 px-2 sm:px-6 py-2.5 rounded-lg hover:bg-slate-50 transition text-slate-500 hover:text-blue-600 flex-1 justify-center active:bg-slate-100">
                            <i class="far fa-paper-plane text-lg"></i> <span class="font-semibold text-sm">Send</span>
                        </button>
                    </div>
                </div>
            `;
        }

        function renderSidebar() {
            // Render Trending Jobs
            const jobList = document.getElementById('trending-jobs-list');
            jobList.innerHTML = trendingJobs.map(job => `
                <div class="group cursor-pointer flex items-start gap-3 pb-3 border-b border-slate-50 last:border-0 last:pb-0" onclick="alert('Viewing trending job: ${job.title}')">
                    <div class="w-10 h-10 rounded-lg bg-slate-50 flex items-center justify-center text-slate-400 group-hover:text-white group-hover:bg-blue-500 transition shadow-sm">
                        <i class="fas ${job.icon}"></i>
                    </div>
                    <div class="flex-grow">
                        <h4 class="font-semibold text-sm text-slate-800 group-hover:text-blue-600 transition line-clamp-1">${job.title}</h4>
                        <p class="text-xs text-slate-500 mt-0.5">${job.company}</p>
                        <p class="text-xs text-slate-400 mt-1 flex items-center gap-1"><i class="fas fa-user-friends"></i> ${job.applicants} applied</p>
                    </div>
                </div>
            `).join('');

            // Render Top Companies
             const compList = document.getElementById('top-companies-list');
             compList.innerHTML = topCompanies.map(comp => `
                <div class="flex items-center gap-3 cursor-pointer p-2 -mx-2 rounded-lg hover:bg-slate-50 transition group" onclick="alert('Viewing company profile: ${comp.name}')">
                    <div class="w-10 h-10 rounded-lg border border-slate-200 bg-white p-1 shadow-sm flex items-center justify-center">
                        <img src="${comp.logo}" class="w-full h-full object-contain">
                    </div>
                    <div class="flex-grow">
                        <h4 class="font-semibold text-sm text-slate-900 group-hover:text-blue-600 transition">${comp.name}</h4>
                        <p class="text-xs text-slate-500">${comp.type}</p>
                    </div>
                     <span class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-full">${comp.activeJobs} Jobs</span>
                </div>
             `).join('');
        }

        // --- NEW INTERACTION FUNCTIONS ---

        function navigateTo(pageName) {
            alert(`Navigating to ${pageName} page...`);
        }

        function filterCategory(categoryName) {
            alert(`Filtering feed by category: ${categoryName}`);
        }

        function toggleStatus(statusName) {
            alert(`Toggling status: ${statusName}`);
        }

        function commentOnPost(postId) {
            const comment = prompt("Write your comment:");
            if (comment && comment.trim() !== "") {
                const post = posts.find(p => p.id === postId);
                if (post) {
                    post.comments++;
                    renderFeed();
                    // Simulating a notification/toast
                    console.log(`Commented on post ${postId}: ${comment}`);
                }
            }
        }

        function repost(postId) {
            if (confirm("Repost this to your feed?")) {
                const post = posts.find(p => p.id === postId);
                if (post) {
                    post.shares++;
                    renderFeed();
                    alert("Reposted successfully!");
                }
            }
        }

        function sendPost(postId) {
            alert("Post link copied to clipboard! Ready to share via message.");
        }

        // --- EXISTING FUNCTIONS ---

        function toggleLike(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.likedByMe = !post.likedByMe;
                post.likes += post.likedByMe ? 1 : -1;
                renderFeed(); 
            }
        }

        function votePoll(postId, optionIdx) {
            const post = posts.find(p => p.id === postId);
            if (post && post.type === 'poll') {
                post.pollData.options[optionIdx].votes++;
                post.pollData.totalVotes++;
                renderFeed();
            }
        }

        function submitTextPost() {
            const input = document.getElementById('postInput');
            const content = input.value.trim();
            if (!content) return;
            const newPost = {
                id: Date.now(),
                author: currentUser.name,
                authorAvatar: currentUser.avatar,
                authorTitle: currentUser.title,
                authorStatus: currentUser.workStatus,
                isVerified: false,
                time: "Just now",
                type: "update",
                content: content,
                likes: 0,
                comments: 0,
                shares: 0,
                likedByMe: false
            };
            posts.unshift(newPost); 
            input.value = '';
            renderFeed();
        }

        // --- MODAL & FORM LOGIC ---

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        function submitJob() {
            const title = document.getElementById('jobTitle').value;
            const location = document.getElementById('jobLocation').value;
            const type = document.getElementById('jobType').value;
            const salary = document.getElementById('jobSalary').value;

            if (!title) { alert("Job Title is required"); return; }

            const newPost = {
                id: Date.now(),
                author: currentUser.name,
                authorAvatar: currentUser.avatar,
                authorTitle: currentUser.title,
                authorStatus: "Hiring", // Automatically set to Hiring
                isVerified: false,
                time: "Just now",
                type: "job",
                content: `I'm hiring for a ${title}. Reach out if you are interested!`,
                jobDetails: {
                    title: title,
                    location: location || "Remote",
                    type: type,
                    salary: salary || "Negotiable",
                    tags: ["Hiring"]
                },
                likes: 0,
                comments: 0,
                shares: 0,
                likedByMe: false
            };
            posts.unshift(newPost);
            renderFeed();
            closeModal('jobModal');
            // Clear inputs
            document.getElementById('jobTitle').value = '';
            document.getElementById('jobLocation').value = '';
            document.getElementById('jobSalary').value = '';
        }

        function submitPoll() {
            const question = document.getElementById('pollQuestion').value;
            const opt1 = document.getElementById('pollOpt1').value;
            const opt2 = document.getElementById('pollOpt2').value;
            const opt3 = document.getElementById('pollOpt3').value;

            if (!question || !opt1 || !opt2) { alert("Question and at least 2 options are required"); return; }

            const options = [
                { text: opt1, votes: 0 },
                { text: opt2, votes: 0 }
            ];
            if (opt3) options.push({ text: opt3, votes: 0 });

            const newPost = {
                id: Date.now(),
                author: currentUser.name,
                authorAvatar: currentUser.avatar,
                authorTitle: currentUser.title,
                authorStatus: currentUser.workStatus,
                isVerified: false,
                time: "Just now",
                type: "poll",
                content: question,
                pollData: {
                    totalVotes: 0,
                    options: options,
                    votedOption: null
                },
                likes: 0,
                comments: 0,
                shares: 0,
                likedByMe: false
            };
            posts.unshift(newPost);
            renderFeed();
            closeModal('pollModal');
            // Clear inputs
            document.getElementById('pollQuestion').value = '';
            document.getElementById('pollOpt1').value = '';
            document.getElementById('pollOpt2').value = '';
            document.getElementById('pollOpt3').value = '';
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>