<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Companies Hiring Now</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Header Section -->
        <div class="mb-8 pt-4">
            <h1 class="text-2xl md:text-3xl font-bold text-slate-900">Top Companies Hiring Now</h1>
            <p class="text-slate-500 mt-2">Discover the best places to work based on your preferences.</p>
        </div>

        <!-- 2. Top Category Slider -->
        <div class="relative group mb-8">
            <button id="scroll-left" class="absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white shadow-md border border-slate-100 rounded-full p-2 text-slate-600 hover:text-blue-600 hover:scale-105 transition-all hidden md:flex opacity-0 group-hover:opacity-100">
                <i data-lucide="chevron-left" class="w-5 h-5"></i>
            </button>
            
            <div id="category-carousel" class="flex gap-4 overflow-x-auto no-scrollbar scroll-smooth pb-4 px-1">
                <!-- Categories injected by JS -->
            </div>

            <button id="scroll-right" class="absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white shadow-md border border-slate-100 rounded-full p-2 text-slate-600 hover:text-blue-600 hover:scale-105 transition-all hidden md:flex opacity-0 group-hover:opacity-100">
                <i data-lucide="chevron-right" class="w-5 h-5"></i>
            </button>
        </div>

        <!-- Main Layout Grid -->
        <div class="flex flex-col lg:flex-row gap-8 relative">
            
            <!-- Mobile Filter Toggle -->
            <button id="filter-toggle" class="lg:hidden flex items-center justify-center gap-2 w-full bg-white border border-slate-200 p-3 rounded-xl shadow-sm text-slate-700 font-medium mb-4">
                <i data-lucide="filter" class="w-4 h-4"></i> Filters
            </button>

            <!-- 3. Left Filter Panel (Sidebar) -->
            <aside id="filter-sidebar" class="fixed inset-0 bg-black/50 z-50 hidden lg:static lg:block lg:bg-transparent lg:z-auto lg:w-72 lg:flex-shrink-0">
                <div class="h-full lg:h-auto w-80 lg:w-full bg-white lg:bg-transparent p-6 lg:p-0 overflow-y-auto lg:overflow-visible transition-transform duration-300 transform -translate-x-full lg:translate-x-0 bg-white">
                    
                    <div class="flex justify-between items-center lg:hidden mb-6">
                        <h2 class="text-xl font-bold text-slate-900">Filters</h2>
                        <button id="close-sidebar" class="p-2 text-slate-500 hover:bg-slate-100 rounded-full">
                            <i data-lucide="x" class="w-6 h-6"></i>
                        </button>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 lg:sticky lg:top-8 overflow-hidden">
                        <!-- Location Filter -->
                        <div class="p-5 border-b border-slate-100">
                            <h3 class="font-semibold text-slate-900 mb-3 flex items-center justify-between">
                                Location 
                                <i data-lucide="chevron-up" class="w-4 h-4 text-slate-400"></i>
                            </h3>
                            <div class="relative">
                                <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                                <input type="text" id="location-search" placeholder="Search city..." 
                                    class="w-full pl-9 pr-4 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all">
                            </div>
                        </div>

                        <!-- Company Type Filter -->
                        <div class="p-5 border-b border-slate-100">
                            <h3 class="font-semibold text-slate-900 mb-3 flex items-center justify-between">
                                Company Type
                                <i data-lucide="chevron-up" class="w-4 h-4 text-slate-400"></i>
                            </h3>
                            <div class="space-y-3" id="type-filters">
                                <!-- Checkboxes injected by JS -->
                            </div>
                        </div>

                         <!-- Industry Filter (New) -->
                         <div class="p-5 border-b border-slate-100">
                            <h3 class="font-semibold text-slate-900 mb-3 flex items-center justify-between">
                                Industry
                                <i data-lucide="chevron-up" class="w-4 h-4 text-slate-400"></i>
                            </h3>
                            <div class="space-y-3" id="industry-filters">
                                <!-- Checkboxes injected by JS -->
                            </div>
                        </div>

                        <!-- Rating Filter (New) -->
                        <div class="p-5">
                            <h3 class="font-semibold text-slate-900 mb-3 flex items-center justify-between">
                                Rating
                                <i data-lucide="chevron-up" class="w-4 h-4 text-slate-400"></i>
                            </h3>
                            <div class="space-y-3" id="rating-filters">
                                <!-- Radios injected by JS -->
                            </div>
                        </div>

                        <!-- Reset Button -->
                        <div class="p-4 bg-slate-50 border-t border-slate-100">
                            <button onclick="resetFilters()" class="w-full py-2 text-sm font-medium text-slate-600 hover:text-blue-600 transition-colors">
                                Reset Filters
                            </button>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- 4. Company Listing Grid (Right) -->
            <main class="flex-1">
                <div class="flex justify-between items-center mb-4">
                    <p class="text-sm text-slate-500">Showing <span class="font-semibold text-slate-900" id="result-count">0</span> companies</p>
                    <div class="flex items-center gap-2 text-sm text-slate-600">
                        <span>Sort by:</span>
                        <select class="border-none bg-transparent font-medium focus:ring-0 cursor-pointer text-slate-900">
                            <option>Relevance</option>
                            <option>Rating</option>
                            <option>Newest</option>
                        </select>
                    </div>
                </div>

                <div id="company-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 auto-rows-max">
                    <!-- Company Cards injected by JS -->
                </div>

                <!-- Pagination (New) -->
                <div id="pagination-controls" class="mt-8 flex justify-center items-center gap-2 hidden">
                    <!-- Buttons injected by JS -->
                </div>
                
                <!-- Empty State -->
                <div id="empty-state" class="hidden flex-col items-center justify-center py-16 text-center">
                    <div class="bg-slate-100 p-4 rounded-full mb-4">
                        <i data-lucide="search-x" class="w-8 h-8 text-slate-400"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-slate-900">No companies found</h3>
                    <p class="text-slate-500 mt-1 max-w-xs mx-auto">Try adjusting your filters or search criteria to find what you're looking for.</p>
                    <button onclick="resetFilters()" class="mt-4 px-4 py-2 bg-blue-50 text-blue-600 font-medium rounded-lg hover:bg-blue-100 transition-colors">
                        Clear all filters
                    </button>
                </div>
            </main>

        </div>
    </div>

    <script>
        // --- Data ---
        const categories = [
            { id: 'all', name: 'All Companies', count: 1240 },
            { id: 'mnc', name: 'MNCs', count: 450 },
            { id: 'internet', name: 'Internet', count: 230 },
            { id: 'product', name: 'Product', count: 180 },
            { id: 'finance', name: 'Fintech', count: 120 },
            { id: 'startup', name: 'Startups', count: 320 },
            { id: 'retail', name: 'Retail', count: 90 },
            { id: 'media', name: 'Media', count: 65 }
        ];

        const companies = [
            {
                id: 1,
                name: "TechVision Global",
                logo: "TV",
                rating: 4.5,
                reviews: 1250,
                industry: "Internet",
                type: "MNC",
                location: "New York",
                employees: "5000+",
                hiring: true,
                tags: ["B2B", "SaaS"]
            },
            {
                id: 2,
                name: "AlphaStream",
                logo: "AS",
                rating: 4.8,
                reviews: 420,
                industry: "Product",
                type: "Startup",
                location: "San Francisco",
                employees: "50-200",
                hiring: true,
                tags: ["AI/ML", "Unicorn"]
            },
            {
                id: 3,
                name: "FinCore Systems",
                logo: "FS",
                rating: 4.1,
                reviews: 3200,
                industry: "Fintech",
                type: "MNC",
                location: "London",
                employees: "10000+",
                hiring: true,
                tags: ["Banking", "Legacy"]
            },
            {
                id: 4,
                name: "GreenEarth Energy",
                logo: "GE",
                rating: 3.9,
                reviews: 850,
                industry: "Manufacturing",
                type: "Corporate",
                location: "Berlin",
                employees: "1000-5000",
                hiring: false,
                tags: ["Sustainable", "Hardware"]
            },
            {
                id: 5,
                name: "CloudScale Inc",
                logo: "CS",
                rating: 4.6,
                reviews: 150,
                industry: "Internet",
                type: "Startup",
                location: "Austin",
                employees: "200-500",
                hiring: true,
                tags: ["Cloud", "Remote"]
            },
            {
                id: 6,
                name: "ShopEase",
                logo: "SE",
                rating: 4.3,
                reviews: 5600,
                industry: "Retail",
                type: "MNC",
                location: "Seattle",
                employees: "10000+",
                hiring: true,
                tags: ["E-commerce", "B2C"]
            },
            {
                id: 7,
                name: "DataMinds",
                logo: "DM",
                rating: 4.7,
                reviews: 89,
                industry: "Product",
                type: "Startup",
                location: "Toronto",
                employees: "10-50",
                hiring: true,
                tags: ["Big Data", "Analytics"]
            },
            {
                id: 8,
                name: "MediaWave",
                logo: "MW",
                rating: 4.0,
                reviews: 670,
                industry: "Media",
                type: "Corporate",
                location: "New York",
                employees: "500-1000",
                hiring: true,
                tags: ["Digital", "Advertising"]
            },
            {
                id: 9,
                name: "EduSmart",
                logo: "ES",
                rating: 4.2,
                reviews: 210,
                industry: "EdTech",
                type: "Startup",
                location: "Boston",
                employees: "100-200",
                hiring: true,
                tags: ["Education", "Remote"]
            },
            {
                id: 10,
                name: "HealthHub",
                logo: "HH",
                rating: 4.4,
                reviews: 1100,
                industry: "Healthcare",
                type: "MNC",
                location: "Chicago",
                employees: "2000+",
                hiring: true,
                tags: ["Health", "Tech"]
            },
            {
                id: 11,
                name: "AutoDrive",
                logo: "AD",
                rating: 3.8,
                reviews: 3200,
                industry: "Automotive",
                type: "Corporate",
                location: "Detroit",
                employees: "10000+",
                hiring: true,
                tags: ["Auto", "Engineering"]
            },
            {
                id: 12,
                name: "SolarCity",
                logo: "SC",
                rating: 4.1,
                reviews: 450,
                industry: "Energy",
                type: "Startup",
                location: "San Diego",
                employees: "200-500",
                hiring: true,
                tags: ["Solar", "Green"]
            },
            {
                id: 13,
                name: "GameOn Studios",
                logo: "GS",
                rating: 4.9,
                reviews: 80,
                industry: "Gaming",
                type: "Startup",
                location: "Montreal",
                employees: "50-100",
                hiring: true,
                tags: ["Games", "Creative"]
            },
            {
                id: 14,
                name: "LogiTech Solutions",
                logo: "LS",
                rating: 3.7,
                reviews: 900,
                industry: "Logistics",
                type: "Corporate",
                location: "Hamburg",
                employees: "5000+",
                hiring: false,
                tags: ["Supply Chain", "Ops"]
            },
            {
                id: 15,
                name: "CyberShield",
                logo: "CY",
                rating: 4.8,
                reviews: 300,
                industry: "Security",
                type: "Startup",
                location: "Tel Aviv",
                employees: "100-200",
                hiring: true,
                tags: ["CyberSec", "AI"]
            },
            // Added 20 More Companies Below
            {
                id: 16,
                name: "BlueSky Aviation",
                logo: "BA",
                rating: 4.0,
                reviews: 560,
                industry: "Travel",
                type: "Corporate",
                location: "Dubai",
                employees: "1000-5000",
                hiring: true,
                tags: ["Aviation", "Services"]
            },
            {
                id: 17,
                name: "FoodieFi",
                logo: "FF",
                rating: 4.6,
                reviews: 230,
                industry: "FoodTech",
                type: "Startup",
                location: "Singapore",
                employees: "50-200",
                hiring: true,
                tags: ["Food", "App"]
            },
            {
                id: 18,
                name: "UrbanConstruct",
                logo: "UC",
                rating: 3.5,
                reviews: 890,
                industry: "Construction",
                type: "MNC",
                location: "Mumbai",
                employees: "5000+",
                hiring: false,
                tags: ["Infra", "Field"]
            },
            {
                id: 19,
                name: "NextGen Robotics",
                logo: "NR",
                rating: 4.9,
                reviews: 45,
                industry: "Robotics",
                type: "Startup",
                location: "Tokyo",
                employees: "10-50",
                hiring: true,
                tags: ["Hardware", "R&D"]
            },
            {
                id: 20,
                name: "StreamLine",
                logo: "SL",
                rating: 3.9,
                reviews: 1400,
                industry: "Logistics",
                type: "MNC",
                location: "Chicago",
                employees: "5000+",
                hiring: true,
                tags: ["Supply Chain", "Global"]
            },
            {
                id: 21,
                name: "PixelPerfect",
                logo: "PP",
                rating: 4.7,
                reviews: 120,
                industry: "Design",
                type: "Startup",
                location: "Paris",
                employees: "10-50",
                hiring: true,
                tags: ["Creative", "Agency"]
            },
            {
                id: 22,
                name: "AgriGrow",
                logo: "AG",
                rating: 4.2,
                reviews: 310,
                industry: "Agriculture",
                type: "Corporate",
                location: "Sydney",
                employees: "500-1000",
                hiring: true,
                tags: ["AgTech", "Sustainable"]
            },
            {
                id: 23,
                name: "SecureNet",
                logo: "SN",
                rating: 4.3,
                reviews: 670,
                industry: "Security",
                type: "MNC",
                location: "Washington",
                employees: "2000+",
                hiring: true,
                tags: ["GovTech", "Cyber"]
            },
            {
                id: 24,
                name: "BioLife Sciences",
                logo: "BL",
                rating: 4.5,
                reviews: 440,
                industry: "Biotech",
                type: "Startup",
                location: "Boston",
                employees: "100-200",
                hiring: true,
                tags: ["Research", "Med"]
            },
            {
                id: 25,
                name: "OceanBlue",
                logo: "OB",
                rating: 3.8,
                reviews: 2100,
                industry: "Shipping",
                type: "MNC",
                location: "Rotterdam",
                employees: "10000+",
                hiring: false,
                tags: ["Maritime", "Logistics"]
            },
            {
                id: 26,
                name: "QuickPay",
                logo: "QP",
                rating: 4.4,
                reviews: 890,
                industry: "Fintech",
                type: "Startup",
                location: "Stockholm",
                employees: "200-500",
                hiring: true,
                tags: ["Payments", "B2C"]
            },
            {
                id: 27,
                name: "SpaceXplore",
                logo: "SX",
                rating: 4.8,
                reviews: 950,
                industry: "Aerospace",
                type: "MNC",
                location: "Los Angeles",
                employees: "5000+",
                hiring: true,
                tags: ["Space", "Engineering"]
            },
            {
                id: 28,
                name: "GreenGrocer",
                logo: "GG",
                rating: 4.0,
                reviews: 340,
                industry: "Retail",
                type: "Corporate",
                location: "Portland",
                employees: "500-1000",
                hiring: true,
                tags: ["Organic", "Retail"]
            },
            {
                id: 29,
                name: "FashionForward",
                logo: "FF",
                rating: 3.7,
                reviews: 1500,
                industry: "Fashion",
                type: "MNC",
                location: "Milan",
                employees: "2000+",
                hiring: false,
                tags: ["Design", "Apparel"]
            },
            {
                id: 30,
                name: "BlockChainX",
                logo: "BX",
                rating: 4.6,
                reviews: 85,
                industry: "Fintech",
                type: "Startup",
                location: "Zug",
                employees: "10-50",
                hiring: true,
                tags: ["Crypto", "Web3"]
            },
            {
                id: 31,
                name: "LegalEase",
                logo: "LE",
                rating: 4.1,
                reviews: 220,
                industry: "Legal",
                type: "Corporate",
                location: "London",
                employees: "200-500",
                hiring: true,
                tags: ["Law", "Services"]
            },
            {
                id: 32,
                name: "DocuSignify",
                logo: "DS",
                rating: 4.5,
                reviews: 1100,
                industry: "Internet",
                type: "MNC",
                location: "San Francisco",
                employees: "5000+",
                hiring: true,
                tags: ["SaaS", "B2B"]
            },
            {
                id: 33,
                name: "RealtyPro",
                logo: "RP",
                rating: 3.9,
                reviews: 560,
                industry: "Real Estate",
                type: "Corporate",
                location: "Dubai",
                employees: "500-1000",
                hiring: true,
                tags: ["Property", "Sales"]
            },
            {
                id: 34,
                name: "CleanEnergy",
                logo: "CE",
                rating: 4.3,
                reviews: 430,
                industry: "Energy",
                type: "Startup",
                location: "Oslo",
                employees: "100-200",
                hiring: true,
                tags: ["Renewable", "Tech"]
            },
            {
                id: 35,
                name: "PetCare Co",
                logo: "PC",
                rating: 4.7,
                reviews: 320,
                industry: "Retail",
                type: "Startup",
                location: "Denver",
                employees: "50-100",
                hiring: true,
                tags: ["Pets", "E-commerce"]
            }
        ];

        // --- State ---
        let state = {
            category: 'all',
            location: '',
            types: new Set(),
            industries: new Set(),
            minRating: 0,
            page: 1
        };

        const ITEMS_PER_PAGE = 6;

        // --- DOM Elements ---
        const categoryCarousel = document.getElementById('category-carousel');
        const companyGrid = document.getElementById('company-grid');
        const typeFiltersContainer = document.getElementById('type-filters');
        const industryFiltersContainer = document.getElementById('industry-filters');
        const ratingFiltersContainer = document.getElementById('rating-filters');
        const resultCount = document.getElementById('result-count');
        const emptyState = document.getElementById('empty-state');
        const locationInput = document.getElementById('location-search');
        const paginationControls = document.getElementById('pagination-controls');

        // --- Initialization ---
        function init() {
            renderCategories();
            renderFilters();
            renderCompanies();
            lucide.createIcons();
            
            // Setup Sidebar Toggle
            const toggle = document.getElementById('filter-toggle');
            const close = document.getElementById('close-sidebar');
            const sidebar = document.getElementById('filter-sidebar');
            const drawer = sidebar.querySelector('div');

            toggle.addEventListener('click', () => {
                sidebar.classList.remove('hidden');
                setTimeout(() => {
                    drawer.classList.remove('-translate-x-full');
                }, 10);
            });

            const closeSidebar = () => {
                drawer.classList.add('-translate-x-full');
                setTimeout(() => {
                    sidebar.classList.add('hidden');
                }, 300);
            };

            close.addEventListener('click', closeSidebar);
            sidebar.addEventListener('click', (e) => {
                if(e.target === sidebar) closeSidebar();
            });

            // Setup Carousel Scroll
            document.getElementById('scroll-left').addEventListener('click', () => {
                categoryCarousel.scrollBy({ left: -200, behavior: 'smooth' });
            });
            document.getElementById('scroll-right').addEventListener('click', () => {
                categoryCarousel.scrollBy({ left: 200, behavior: 'smooth' });
            });

            // Setup Location Filter
            locationInput.addEventListener('input', (e) => {
                state.location = e.target.value.toLowerCase();
                renderCompanies();
            });
        }

        // --- Render Functions ---

        function renderCategories() {
            categoryCarousel.innerHTML = categories.map(cat => `
                <button 
                    onclick="selectCategory('${cat.id}')"
                    class="flex-shrink-0 min-w-[160px] p-4 rounded-xl border transition-all duration-200 text-left group
                    ${state.category === cat.id 
                        ? 'bg-blue-50 border-blue-200 shadow-inner' 
                        : 'bg-white border-slate-200 shadow-sm hover:shadow-md hover:border-blue-200'}"
                >
                    <div class="font-semibold ${state.category === cat.id ? 'text-blue-700' : 'text-slate-800 group-hover:text-blue-600'}">
                        ${cat.name}
                    </div>
                    <div class="mt-2 text-sm font-medium flex items-center gap-1 ${state.category === cat.id ? 'text-blue-600' : 'text-slate-500'}">
                        ${cat.count} <span class="text-xs font-normal text-slate-400">jobs</span>
                        <i data-lucide="arrow-right" class="w-3 h-3 ml-auto opacity-0 group-hover:opacity-100 transition-opacity"></i>
                    </div>
                </button>
            `).join('');
            lucide.createIcons();
        }

        function renderFilters() {
            // 1. Company Types
            const types = ['MNC', 'Startup', 'Corporate', 'Government'];
            typeFiltersContainer.innerHTML = types.map(type => {
                const count = companies.filter(c => c.type === type).length;
                return `
                <label class="flex items-center justify-between cursor-pointer group">
                    <div class="flex items-center">
                        <input type="checkbox" value="${type}" onchange="toggleFilter('types', this)" 
                            class="w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500 cursor-pointer">
                        <span class="ml-3 text-slate-600 group-hover:text-slate-900 text-sm">${type}</span>
                    </div>
                    <span class="text-xs text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full group-hover:bg-slate-200 transition-colors">${count}</span>
                </label>
            `}).join('');

            // 2. Industries
            const industries = [...new Set(companies.map(c => c.industry))].sort();
            industryFiltersContainer.innerHTML = industries.map(ind => {
                const count = companies.filter(c => c.industry === ind).length;
                return `
                <label class="flex items-center justify-between cursor-pointer group">
                    <div class="flex items-center">
                        <input type="checkbox" value="${ind}" onchange="toggleFilter('industries', this)" 
                            class="w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500 cursor-pointer">
                        <span class="ml-3 text-slate-600 group-hover:text-slate-900 text-sm">${ind}</span>
                    </div>
                    <span class="text-xs text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full group-hover:bg-slate-200 transition-colors">${count}</span>
                </label>
            `}).join('');

            // 3. Ratings
            const ratings = [4, 3, 2];
            ratingFiltersContainer.innerHTML = ratings.map(r => `
                <label class="flex items-center cursor-pointer group">
                    <input type="radio" name="rating" value="${r}" onchange="setRatingFilter(${r})" 
                        class="w-4 h-4 text-blue-600 border-slate-300 focus:ring-blue-500 cursor-pointer">
                    <span class="ml-3 text-slate-600 group-hover:text-slate-900 text-sm flex items-center">
                        ${r}+ <i data-lucide="star" class="w-3 h-3 ml-1 fill-amber-400 text-amber-400"></i>
                    </span>
                </label>
            `).join('') + `
                 <label class="flex items-center cursor-pointer group">
                    <input type="radio" name="rating" value="0" onchange="setRatingFilter(0)" checked 
                        class="w-4 h-4 text-blue-600 border-slate-300 focus:ring-blue-500 cursor-pointer">
                    <span class="ml-3 text-slate-600 group-hover:text-slate-900 text-sm">Any</span>
                </label>
            `;
        }

        function renderTypeFilters() {
            // Extract unique types from companies for dynamic filtering options
            // Or use a preset list. Let's use a preset + counts.
            const types = ['MNC', 'Startup', 'Corporate', 'Government'];
            
            typeFiltersContainer.innerHTML = types.map(type => {
                const count = companies.filter(c => c.type === type).length;
                return `
                <label class="flex items-center justify-between cursor-pointer group">
                    <div class="flex items-center">
                        <input type="checkbox" value="${type}" onchange="toggleTypeFilter(this)" 
                            class="w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500 cursor-pointer">
                        <span class="ml-3 text-slate-600 group-hover:text-slate-900 text-sm">${type}</span>
                    </div>
                    <span class="text-xs text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full group-hover:bg-slate-200 transition-colors">${count}</span>
                </label>
            `}).join('');
        }

        function getInitialsColor(initials) {
            const colors = [
                'bg-blue-100 text-blue-700',
                'bg-emerald-100 text-emerald-700', 
                'bg-violet-100 text-violet-700',
                'bg-amber-100 text-amber-700',
                'bg-rose-100 text-rose-700'
            ];
            const index = initials.charCodeAt(0) % colors.length;
            return colors[index];
        }

        function renderCompanies() {
            // 1. Filtering Logic
            const filtered = companies.filter(company => {
                const matchCategory = state.category === 'all' || 
                                      state.category === company.industry.toLowerCase() || 
                                      (state.category === 'mnc' && company.type === 'MNC') ||
                                      (state.category === 'startup' && company.type === 'Startup');
                
                const matchLocation = company.location.toLowerCase().includes(state.location);
                const matchType = state.types.size === 0 || state.types.has(company.type);
                const matchIndustry = state.industries.size === 0 || state.industries.has(company.industry);
                const matchRating = company.rating >= state.minRating;

                return matchCategory && matchLocation && matchType && matchIndustry && matchRating;
            });

            // 2. Pagination Logic
            resultCount.textContent = filtered.length;
            const totalPages = Math.ceil(filtered.length / ITEMS_PER_PAGE);
            
            // Adjust current page if out of bounds after filter change
            if (state.page > totalPages) state.page = 1;

            const startIndex = (state.page - 1) * ITEMS_PER_PAGE;
            const endIndex = startIndex + ITEMS_PER_PAGE;
            const paginatedItems = filtered.slice(startIndex, endIndex);

            // 3. Render
            if (filtered.length === 0) {
                companyGrid.classList.add('hidden');
                paginationControls.classList.add('hidden');
                emptyState.classList.remove('hidden');
                emptyState.classList.add('flex');
            } else {
                companyGrid.classList.remove('hidden');
                paginationControls.classList.remove('hidden');
                emptyState.classList.add('hidden');
                emptyState.classList.remove('flex');

                let gridHTML = '';
                
                paginatedItems.forEach((company, index) => {
                    const colorClass = getInitialsColor(company.logo);
                    
                    // Banner Injection Logic: Insert after the 4th item (index 3)
                    if (index === 4) {
                        gridHTML += `
                            <div class="col-span-1 md:col-span-2 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl p-6 text-white flex flex-col md:flex-row items-center justify-between shadow-lg my-2">
                                <div class="mb-4 md:mb-0">
                                    <span class="bg-blue-500 text-blue-100 text-xs font-bold px-2 py-1 rounded mb-2 inline-block">Ad</span>
                                    <h3 class="text-xl font-bold">Hire the Top 1% Talent</h3>
                                    <p class="text-blue-100 text-sm mt-1">Get exclusive access to pre-vetted senior developers.</p>
                                </div>
                                <button class="px-5 py-2 bg-white text-blue-700 font-bold text-sm rounded-lg hover:bg-blue-50 transition-colors shadow-sm whitespace-nowrap">
                                    Post a Job
                                </button>
                            </div>
                        `;
                    }

                    gridHTML += `
                    <div class="group bg-white rounded-xl p-5 shadow-sm border border-slate-100 hover:shadow-md hover:border-blue-100 transition-all cursor-pointer flex flex-col h-full">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex gap-4">
                                <div class="w-12 h-12 rounded-lg ${colorClass} flex items-center justify-center font-bold text-lg">
                                    ${company.logo}
                                </div>
                                <div>
                                    <h3 class="font-bold text-slate-900 group-hover:text-blue-600 transition-colors">${company.name}</h3>
                                    <div class="flex items-center gap-2 mt-1">
                                        <div class="flex items-center text-amber-400 text-sm font-semibold">
                                            <span class="mr-1">${company.rating}</span>
                                            <i data-lucide="star" class="w-3 h-3 fill-current"></i>
                                        </div>
                                        <span class="text-xs text-slate-400 border-l border-slate-300 pl-2">
                                            ${company.reviews} reviews
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <button class="text-slate-300 group-hover:text-blue-600 transition-colors">
                                <i data-lucide="chevron-right" class="w-5 h-5"></i>
                            </button>
                        </div>
                        
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600">
                                <i data-lucide="map-pin" class="w-3 h-3 mr-1 text-slate-400"></i>
                                ${company.location}
                            </span>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600">
                                <i data-lucide="users" class="w-3 h-3 mr-1 text-slate-400"></i>
                                ${company.employees}
                            </span>
                            ${company.tags.map(tag => `
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-600 border border-blue-100">
                                    ${tag}
                                </span>
                            `).join('')}
                        </div>

                        <div class="mt-auto pt-4 border-t border-slate-100 flex justify-between items-center">
                            <span class="text-xs font-medium text-slate-500">${company.industry}</span>
                            <span class="text-sm font-semibold text-blue-600 group-hover:translate-x-1 transition-transform inline-flex items-center">
                                View Jobs 
                            </span>
                        </div>
                    </div>
                `;
                });
                
                companyGrid.innerHTML = gridHTML;
                renderPaginationControls(totalPages);
                lucide.createIcons();
            }
        }

        function renderPaginationControls(totalPages) {
            if (totalPages <= 1) {
                paginationControls.innerHTML = '';
                return;
            }

            let html = `
                <button 
                    onclick="changePage(${state.page - 1})" 
                    class="p-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed"
                    ${state.page === 1 ? 'disabled' : ''}
                >
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </button>
            `;

            for (let i = 1; i <= totalPages; i++) {
                html += `
                    <button 
                        onclick="changePage(${i})"
                        class="px-4 py-2 text-sm font-medium rounded-lg transition-colors
                        ${state.page === i 
                            ? 'bg-blue-600 text-white shadow-sm' 
                            : 'bg-white border border-slate-200 text-slate-600 hover:bg-slate-50'}"
                    >
                        ${i}
                    </button>
                `;
            }

            html += `
                <button 
                    onclick="changePage(${state.page + 1})"
                    class="p-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed"
                    ${state.page === totalPages ? 'disabled' : ''}
                >
                    <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </button>
            `;

            paginationControls.innerHTML = html;
            lucide.createIcons();
        }

        // --- Action Handlers ---

        function selectCategory(id) {
            state.category = id;
            state.page = 1; // Reset page
            renderCategories();
            renderCompanies();
        }

        function toggleFilter(type, checkbox) {
            // Generic handler for Set-based filters (types, industries)
            if (checkbox.checked) {
                state[type].add(checkbox.value);
            } else {
                state[type].delete(checkbox.value);
            }
            state.page = 1;
            renderCompanies();
        }

        function setRatingFilter(value) {
            state.minRating = Number(value);
            state.page = 1;
            renderCompanies();
        }

        function changePage(newPage) {
            state.page = newPage;
            renderCompanies();
            // Scroll to top of grid
            companyGrid.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function resetFilters() {
            state = {
                category: 'all',
                location: '',
                types: new Set(),
                industries: new Set(),
                minRating: 0,
                page: 1
            };
            
            // Reset UI inputs
            locationInput.value = '';
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('input[name="rating"]').forEach(r => r.checked = (r.value === "0"));
            
            renderCategories();
            renderCompanies();
        }

        // Start
        init();

    </script>
</body>
</html>